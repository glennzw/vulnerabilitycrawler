   Fix issue introduced previously whereby php_Self is now used unchecked.
   
   introduced previously by john attempting to fix symlinks. Since we now use php 5.2, we can make use of filter_var.
   
   This is a simpler version of what we were trying to do previously aka http://git.mantisforge.org/w/mantisbt.git?a=commitdiff;h=5ac1fdf32717d0c82cca7e7660dd4fd316a6a1b8
   
   Depending on server/mantis config this can lead to XSS issues
   
   David: Backported from master branch and removed unreachable code branch.
   
   Signed-off-by: David Hicks <d@hx.id.au>
			$t_host = 'localhost';
		}

		$t_path = str_replace( basename( $_SERVER['PHP_SELF'] ), '', $_SERVER['PHP_SELF'] );
		$t_path = basename( $t_path ) == "admin" ? dirname( $t_path ) . '/' : $t_path;
		$t_path = basename( $t_path ) == "soap" ? dirname( dirname( $t_path ) ) . '/' : $t_path;
		

		$t_url	= $t_protocol . '://' . $t_host . $t_path;

