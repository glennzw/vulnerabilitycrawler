   Fix XML Parser to fail on external entities
   
   Bump dependency on LibXML to the latest because of their recent
   new() signature change
              PREREQ_PM    => {
                  'Danga::Socket'                => 1.51,
                  'XML::SAX'                     => 0,
                  'XML::LibXML::SAX'             => 0,
                  'Net::DNS'                     => 0.48,
                  'Net::SSLeay'                  => 0,

    # libxml mode:
    if (1) {
        my $libxml = XML::LibXML->new;
        $libxml->set_handler($self);
        $self->{LibParser} = $libxml;

use DJabberd::XMLParser;
use XML::SAX::PurePerl;
use Scalar::Util qw(weaken);
use Test::More tests => 10;
use Data::Dumper;

my $fulldoc = qq{<?xml version="1.0"?><root xmlns='root' xmlns:a='aa' global='foo' xmlns:b='bb' a:name='aname' b:name='bname' name='globalname'>
{
    my $handler = EventRecorder->new(\$dummy);
    my $p       = DJabberd::XMLParser->new(Handler => $handler);
    $p->parse_more("<foo><tag>");
    $p->finish_push;
    like($dummy, qr/foo.+tag/s);
    $ref = \$p;
}
ok(!$ref, "p went away");

# byte at a time
my $n = 0;
my $byte_events;
sub new {
    my ($class, $outref) = @_;
    $$outref = "";
    return bless {
        outref => $outref,
    };
}

sub start_element {
