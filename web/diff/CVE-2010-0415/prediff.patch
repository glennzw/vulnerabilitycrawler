   Fix potential crash with sys_move_pages
   
   We incorrectly depended on the 'node_state/node_isset()' functions
   testing the node range, rather than checking it explicitly.  That's not
   reliable, even if it might often happen to work.  So do the proper
   explicit test.
   
   Reported-by: Marcus Meissner <meissner@suse.de>
   Acked-and-tested-by: Brice Goglin <Brice.Goglin@inria.fr>
   Acked-by: Hugh Dickins <hugh.dickins@tiscali.co.uk>
   Cc: stable@kernel.org
   Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
				goto out_pm;

			err = -ENODEV;
			if (!node_state(node, N_HIGH_MEMORY))
				goto out_pm;

