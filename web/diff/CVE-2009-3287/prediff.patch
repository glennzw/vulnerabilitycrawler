   Fix Remote address spoofing vulnerability in Connection#remote_address [Alexey Borzenkov]
== 1.2.3
 * Fix uninitialized constant ActionController::Dispatcher error with Rails 1.2.3 [Chris Anderton] [#103 state:resolved]

== 1.2.2 I Find Your Lack of Sauce Disturbing release

    # IP Address of the remote client.
    def remote_address
      @request.forwarded_for || socket_address
    rescue Exception
      log_error
      nil
    HTTP_VERSION      = 'HTTP_VERSION'.freeze
    HTTP_1_0          = 'HTTP/1.0'.freeze
    REMOTE_ADDR       = 'REMOTE_ADDR'.freeze
    FORWARDED_FOR     = 'HTTP_X_FORWARDED_FOR'.freeze
    CONTENT_LENGTH    = 'CONTENT_LENGTH'.freeze
    CONNECTION        = 'HTTP_CONNECTION'.freeze
    KEEP_ALIVE_REGEXP = /\bkeep-alive\b/i.freeze
      @env[REMOTE_ADDR] = address
    end

    def forwarded_for
      @env[FORWARDED_FOR]
    end

    def threaded=(value)
      @env[RACK_MULTITHREAD] = value
    end
  module VERSION #:nodoc:
    MAJOR    = 1
    MINOR    = 2
    TINY     = 2
    
    STRING   = [MAJOR, MINOR, TINY].join('.')
    
    CODENAME = "I Find Your Lack of Sauce Disturbing".freeze
    
    RACK     = [1, 0].freeze # Rack protocol version
  end
    @connection.process
  end
  
  it "should return HTTP_X_FORWARDED_FOR as remote_address" do
    @connection.request.env['HTTP_X_FORWARDED_FOR'] = '1.2.3.4'
    @connection.remote_address.should == '1.2.3.4'
  end
  
  it "should return nil on error retreiving remote_address" do
