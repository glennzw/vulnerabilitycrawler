   GFS2: Fix permissions checking for setflags ioctl()
   
   We should be checking for the ownership of the file for which
   flags are being set, rather than just for write access.
   
   Reported-by: Dan Rosenberg <dan.j.rosenberg@gmail.com>
   Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>
	if (error)
		goto out_drop_write;

	flags = ip->i_diskflags;
	new_flags = (flags & ~mask) | (reqflags & mask);
	if ((new_flags ^ flags) == 0)
{
	struct inode *inode = filp->f_path.dentry->d_inode;
	u32 fsflags, gfsflags;
	if (get_user(fsflags, ptr))
		return -EFAULT;
	gfsflags = fsflags_cvt(fsflags_to_gfs2, fsflags);
	if (!S_ISDIR(inode->i_mode)) {
		if (gfsflags & GFS2_DIF_INHERIT_JDATA)
